:root {
  --bg-white:          #ffffff;
  --bg-gray-light:     #fafafa;
  --primary-blue:      #4FC3F7;
  --primary-blue-hover:#29B6F6;
  --primary-blue-light:#E1F5FE;
  --text-primary:      #333333;
  --text-secondary:    #666666;
  --border-color:      #e0e0e0;
  --shadow-sm:  0 1px 3px  rgba(0,0,0,.08);
  --shadow-md:  0 2px 8px  rgba(0,0,0,.10);
  --shadow-lg:  0 4px 16px rgba(0,0,0,.12);
  --transition: 0.2s ease;
  --font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;

  --btn-size:   48px;
  --btn-gap:    12px;
  --btn-font:   18px;
  --btn-radius: 12px;
  --left-offset: 20px;

  /* Status bar escala junto con --btn-font */
  --status-font:    calc(var(--btn-font) * 0.72);
  --status-padding: calc(var(--btn-font) * 0.55) calc(var(--btn-font) * 1.1);
}

/* ===================================================
   RESET / BASE
=================================================== */
*, *::before, *::after { box-sizing: border-box; user-select: none; margin: 0; padding: 0; }

body {
  margin: 0;
  background: #000;
  overflow: hidden;
  font-family: var(--font-family);
}

/* ===================================================
   ESCENA
=================================================== */
.scene {
  position: absolute;
  inset: 0;
  overflow: hidden;
}

.background { display: none; }

canvas {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 1;
}

#robot {
  position: absolute;
  transform-origin: center;
  filter: drop-shadow(0 2px 8px rgba(0,0,0,.35));
  z-index: 2;
}

/* ===================================================
   HOME BUTTON
=================================================== */
.btn-home {
  position: fixed;
  top: 20px;
  left: var(--left-offset);
  width: var(--btn-size);
  height: var(--btn-size);
  background: var(--bg-white);
  border: 2px solid var(--border-color);
  border-radius: var(--btn-radius);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--transition);
  z-index: 1000;
  box-shadow: var(--shadow-sm);
}
.btn-home:hover {
  border-color: var(--primary-blue);
  background: var(--primary-blue-light);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}
.btn-home i { color: var(--text-secondary); font-size: var(--btn-font); transition: color var(--transition); }
.btn-home:hover i { color: var(--primary-blue); }

/* ===================================================
   TRACK SELECTOR
=================================================== */
.track-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1000;
}
.btn-track {
  width: var(--btn-size);
  height: var(--btn-size);
  background: var(--bg-white);
  border: 2px solid var(--border-color);
  border-radius: var(--btn-radius);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--transition);
  box-shadow: var(--shadow-sm);
}
.btn-track:hover {
  border-color: var(--primary-blue);
  background: var(--primary-blue-light);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}
.btn-track i { color: var(--text-secondary); font-size: var(--btn-font); transition: color var(--transition); }
.btn-track:hover i { color: var(--primary-blue); }

.track-menu {
  display: none;
  position: absolute;
  top: calc(var(--btn-size) + 12px);
  right: 0;
  background: var(--bg-white);
  border: 2px solid var(--border-color);
  border-radius: var(--btn-radius);
  overflow: hidden;
  box-shadow: var(--shadow-lg);
  min-width: 200px;
  z-index: 1001;
}
.track-menu.active { display: block; animation: menuSlide .2s ease; }
@keyframes menuSlide {
  from { opacity: 0; transform: translateY(-8px); }
  to   { opacity: 1; transform: translateY(0); }
}
.track-option {
  display: flex; align-items: center; gap: 12px;
  width: 100%; background: var(--bg-white); color: var(--text-primary);
  border: none; border-bottom: 1px solid var(--border-color);
  padding: 12px 16px; font-size: 14px; font-weight: 500;
  cursor: pointer; transition: background var(--transition);
  font-family: var(--font-family);
}
.track-option:last-child { border-bottom: none; }
.track-option:hover { background: var(--bg-gray-light); }
.track-option i { font-size: 16px; color: var(--text-secondary); transition: color var(--transition); }
.track-option:hover i { color: var(--primary-blue); }
.track-divider { height: 1px; background: var(--border-color); }
.upload-option:hover { background: var(--primary-blue-light); }

/* ===================================================
   DROP ZONE
=================================================== */
.drop-zone {
  position: absolute; inset: 0;
  background: rgba(255,255,255,.95);
  backdrop-filter: blur(10px);
  display: none; align-items: center; justify-content: center;
  z-index: 2000;
  border: 3px dashed var(--primary-blue);
}
.drop-zone.active  { display: flex; }
.drop-zone.drag-over { background: rgba(225,245,254,.95); border-color: var(--primary-blue-hover); }
.drop-zone-content { text-align: center; color: var(--text-primary); pointer-events: none; }
.drop-zone-content i { font-size: 64px; color: var(--primary-blue); margin-bottom: 16px; animation: bounce 2s infinite; }
.drop-zone-content p { font-size: 20px; font-weight: 600; margin-bottom: 8px; }
.drop-zone-content span { font-size: 14px; color: var(--text-secondary); }
@keyframes bounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-14px)} }

/* ===================================================
   LEFT CONTROLS
=================================================== */
.left-controls {
  position: fixed;
  left: var(--left-offset);
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 20px;
  z-index: 900;
  padding-top: 72px;
}

.control-group,
.record-group {
  display: flex;
  flex-direction: column;
  gap: var(--btn-gap);
}

.control-btn {
  width:  var(--btn-size);
  height: var(--btn-size);
  background: var(--bg-white);
  border: 2px solid var(--border-color);
  border-radius: var(--btn-radius);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer;
  transition: all var(--transition);
  box-shadow: var(--shadow-sm);
  color: var(--text-secondary);
  font-size: var(--btn-font);
}
.control-btn:hover  { transform: scale(1.05); box-shadow: var(--shadow-md); }
.control-btn:active { transform: scale(0.95); }
.control-btn:disabled { opacity: .45; cursor: not-allowed; transform: none; }

.play-btn:hover  { background:#E8F5E9; border-color:#4CAF50; }
.play-btn:hover i  { color:#4CAF50; }
.pause-btn:hover { background:#FFF3E0; border-color:#FF9800; }
.pause-btn:hover i { color:#FF9800; }
.reset-btn:hover { background:#FFEBEE; border-color:#F44336; }
.reset-btn:hover i { color:#F44336; }

.circle-btn {
  width:  var(--btn-size);
  height: var(--btn-size);
  border-radius: 50%;
  border: 2px solid var(--border-color);
  background: var(--bg-white);
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all var(--transition);
  box-shadow: var(--shadow-sm);
  font-size: var(--btn-font);
}
.circle-btn:hover  { transform: scale(1.05); box-shadow: var(--shadow-md); }
.circle-btn:active { transform: scale(0.95); }
.circle-btn:disabled { opacity: .45; cursor: not-allowed; transform: none; }

.rec-btn i { color:#F44336; }
.rec-btn:hover { background:#FFEBEE; border-color:#F44336; }
.rec-btn.recording {
  animation: pulse 1.5s infinite;
  background:#FFEBEE; border-color:#F44336;
}
@keyframes pulse {
  0%,100% { box-shadow: 0 0 0 0   rgba(244,67,54,.7); }
  50%      { box-shadow: 0 0 0 10px rgba(244,67,54,0); }
}
.save-btn i { color:#4CAF50; }
.save-btn:hover { background:#E8F5E9; border-color:#4CAF50; }

/* ===================================================
   DPAD
=================================================== */
.dpad {
  position: fixed;
  right: 40px;
  bottom: 80px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  z-index: 900;
}
.dpad-row { display: flex; gap: 6px; align-items: center; }
.dpad-center {
  width: var(--btn-size); height: var(--btn-size);
  background: transparent;
  border: 2px solid transparent;
  border-radius: var(--btn-radius);
}
.dpad-btn {
  width: var(--btn-size); height: var(--btn-size);
  background: var(--bg-white);
  border: 2px solid var(--border-color);
  border-radius: var(--btn-radius);
  color: var(--text-secondary);
  font-size: var(--btn-font);
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all var(--transition);
  box-shadow: var(--shadow-sm);
}
.dpad-btn:hover {
  border-color: var(--primary-blue);
  background: var(--primary-blue-light);
  transform: scale(1.05);
  box-shadow: var(--shadow-md);
}
.dpad-btn:hover i { color: var(--primary-blue); }
.dpad-btn:active, .dpad-btn.pressed {
  transform: scale(.95);
  background: var(--primary-blue-light);
  border-color: var(--primary-blue);
}
.dpad-btn:active i, .dpad-btn.pressed i { color: var(--primary-blue); }

/* ===================================================
   RECORDING INDICATOR
=================================================== */
.recording-indicator {
  position: fixed; top: 50%; left: 50%;
  transform: translate(-50%,-50%);
  background: rgba(255,255,255,.95);
  color: #F44336;
  padding: 12px 24px;
  border-radius: var(--btn-radius);
  font-family: var(--font-family);
  font-size: 14px; font-weight: 600;
  display: none; align-items: center; gap: 10px;
  z-index: 1500;
  box-shadow: var(--shadow-lg);
  border: 2px solid #F44336;
}
.recording-indicator.active { display: flex; }
.recording-indicator i { animation: blink 1s infinite; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.25} }

/* ===================================================
   STATUS BAR
   ✅ Escala junto con --btn-font en cada breakpoint
=================================================== */
.status-indicator {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255,255,255,.95);
  color: var(--text-secondary);
  padding: var(--status-padding);
  border-radius: 8px;
  font-family: var(--font-family);
  font-size: var(--status-font);
  font-weight: 500;
  z-index: 900;
  border: 1px solid var(--border-color);
  box-shadow: var(--shadow-sm);
  text-align: center;
  backdrop-filter: blur(8px);
  max-width: 85vw;
  white-space: nowrap;
}

/* ===================================================
   RESPONSIVE
=================================================== */

/* --- Tablet horizontal / laptop pequeño --- */
@media (max-width: 1024px) {
  :root {
    --btn-size: 44px;
    --btn-font: 16px;
  }
  .dpad { right: 24px; bottom: 70px; }
}

/* --- Tablet vertical / móvil grande --- */
@media (max-width: 768px) {
  :root {
    --btn-size: 42px;
    --btn-font: 15px;
    --left-offset: 14px;
  }
  .btn-home  { top: 12px; }
  .track-selector { top: 12px; right: 14px; }
  .left-controls  { padding-top: 64px; gap: 16px; }
  .dpad { right: 14px; bottom: 60px; gap: 5px; }
  .dpad-row { gap: 5px; }
}

/* --- Móvil --- */
@media (max-width: 480px) {
  :root {
    --btn-size: 38px;
    --btn-font: 13px;
    --btn-gap:  8px;
    --left-offset: 10px;
  }
  .btn-home  { top: 10px; }
  .track-selector { top: 10px; right: 10px; }
  .left-controls  { padding-top: 58px; gap: 12px; }
  .dpad { right: 10px; bottom: 50px; gap: 4px; }
  .dpad-row { gap: 4px; }
  .status-indicator { white-space: normal; }
}

/* --- Landscape móvil / tablet landscape apretado --- */
@media (orientation: landscape) and (max-height: 500px) {
  :root {
    --btn-size: 34px;
    --btn-font: 12px;
    --btn-gap:  6px;
    --left-offset: 10px;
  }
  .btn-home  { top: 8px; }
  .track-selector { top: 8px; right: 10px; }
  .left-controls  { padding-top: 52px; gap: 10px; }
  .dpad { right: 10px; bottom: 28px; gap: 3px; }
  .dpad-row { gap: 3px; }
}